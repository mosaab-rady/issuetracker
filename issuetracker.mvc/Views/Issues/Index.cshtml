@model AllIsuesViewModel
@{
	ViewData["Title"] = "Issues";
}

<div class="container-fluid my-3">

	@* Row for filters *@
	<div class="row mx-2 mb-5">
		<div class="col ms-md-4 bg-secondary py-3 px-4 rounded-3 boxshadow">
			<form asp-action="index" asp-controller="issues" method="get"
				class="d-flex align-items-end justify-content-between">

				<div class="form-group">
					<label asp-for="Project" class="form-label text-light fw-bold">Project</label>
					<input asp-for="Project" list="projectsOptions" class="form-control">
					<datalist id="projectsOptions">
						@foreach (var project in Model.Projects)
						{
							<option value="@project">@project</option>
						}
					</datalist>
				</div>
				<div class="form-group">
					<label asp-for="Priority" class="form-label text-light fw-bold">Priority</label>
					<input asp-for="Priority" list="priorityOptions" class="form-control">
					<datalist id="priorityOptions">
						@foreach (var priority in Model.Priorities)
						{
							<option value="@priority">@priority</option>
						}
					</datalist>
				</div>
				<div class="form-group">
					<label asp-for="Status" class="form-label text-light fw-bold">Status</label>
					<input asp-for="Status" list="statusOptions" class="form-control	">
					<datalist id="statusOptions">
						@foreach (var status in Model.Statuses)
						{
							<option value="@status">@status</option>
						}
					</datalist>
				</div>

				<div class="form-group">
					<button type="submit" class="btn btn-outline-light"><i class="bi bi-search"></i> Search</button>
				</div>
			</form>
		</div>
	</div>


	<div class="row mx-2">
		<div class="col ms-md-4">


			@if (Model.issueViewModels.Count() == 0)
			{
				<div class="row">
					<div class="col text-center">
						<h4>No Issues yet</h4>
					</div>
				</div>
			}
			else
			{
				<div class="row mb-4">
					<div class="col-4 fw-bold">Title</div>
					<div class="col-4 fw-bold">Project</div>
					<div class="col-2 fw-bold">Status</div>
					<div class="col-2 fw-bold">Priority</div>
				</div>

				@foreach (var issue in Model.issueViewModels)
				{
					<a asp-action="issue" asp-controller="issues" asp-route-id="@issue.IssueId"
				class="text-dark text-decoration-none">
						<div class="row projectRow py-3 boxshadow my-3 border-start border-5 rounded-3 
				@(issue.Status=="Closed" ? "border-success" : "border-danger")">
							<div class="col-4 fw-bold">@issue.Title</div>
							<div class="col-4">@issue.ProjectName</div>
							<div class="col-2">
								<p class="@(issue.Status=="Closed" ? "bg-success" : "bg-danger") px-3 py-1 rounded-pill my-0 text-lowercase boxshadow"
							style="width: fit-content;">
									@issue.Status
								</p>
							</div>
							<div class="col-2">
								<p class="px-3 py-1 rounded-pill my-0 text-lowercase boxshadow"
							style="width: fit-content; background-color: @issue.Priority.Color;">
									@issue.Priority.Name
								</p>
							</div>
						</div>
					</a>
				}

			}
		</div>
	</div>


</div>